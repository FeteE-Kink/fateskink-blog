{{template "base" .}}

<!-- page content -->

<div class="content">
  <session class="list"><div id="articles"></div></session>

  <div class="pagination" id="pagination"></div>
</div>
{{template "footer" .}}

<script>
  const articles = [
    {
      title: "Article 1",
      content:
        "This is a preview of the first article. It contains some interesting information about the topic.",
    },
    {
      title: "Article 2",
      content:
        "This article discusses another fascinating topic. Read on to find out more details and insights.",
    },
    {
      title: "Article 3",
      content:
        "In this article, we explore the nuances of yet another subject. The content is compelling and informative.",
    },
    {
      title: "Article 3",
      content:
        "In this article, we explore the nuances of yet another subject. The content is compelling and informative.",
    },
    {
      title: "Article 3",
      content:
        "In this article, we explore the nuances of yet another subject. The content is compelling and informative.",
    },
    {
      title: "Article 3",
      content:
        "In this article, we explore the nuances of yet another subject. The content is compelling and informative.",
    },
    {
      title: "Article 3",
      content:
        "In this article, we explore the nuances of yet another subject. The content is compelling and informative.",
    },
    {
      title: "Article 3",
      content:
        "In this article, we explore the nuances of yet another subject. The content is compelling and informative.",
    },
    {
      title: "Article 3",
      content:
        "In this article, we explore the nuances of yet another subject. The content is compelling and informative.",
    },
    {
      title: "Article 3",
      content:
        "In this article, we explore the nuances of yet another subject. The content is compelling and informative.",
    },
    {
      title: "Article 3",
      content:
        "In this article, we explore the nuances of yet another subject. The content is compelling and informative.",
    },
    {
      title: "Article 3",
      content:
        "In this article, we explore the nuances of yet another subject. The content is compelling and informative.",
    },
    {
      title: "Article 3",
      content:
        "In this article, we explore the nuances of yet another subject. The content is compelling and informative.",
    },
  ];

  const itemsPerPage = 5; // Số bài viết hiển thị trên mỗi trang
  let currentPage = 1;

  function displayArticles(page) {
    const startIndex = (page - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    const paginatedArticles = articles.slice(startIndex, endIndex);
    const articlesContainer = document.getElementById("articles");

    articlesContainer.innerHTML = ""; // Clear existing articles

    paginatedArticles.forEach((article) => {
      const articleElement = document.createElement("div");
      articleElement.classList.add("article");

      const titleElement = document.createElement("h3");
      titleElement.innerText = article.title;

      const contentPreviewElement = document.createElement("p");
      contentPreviewElement.innerText =
        article.content.split(". ").slice(0, 5).join(". ") + ".";

      articleElement.appendChild(titleElement);
      articleElement.appendChild(contentPreviewElement);
      articlesContainer.appendChild(articleElement);
    });

    updatePagination(totalPages());
  }

  function totalPages() {
    return Math.ceil(articles.length / itemsPerPage);
  }

  function updatePagination(totalPages) {
    const paginationContainer = document.getElementById("pagination");
    paginationContainer.innerHTML = ""; // Clear existing pagination

    // Previous button
    const prevButton = document.createElement("button");
    prevButton.innerText = "Previous";
    prevButton.onclick = () => {
      if (currentPage > 1) {
        currentPage--;
        displayArticles(currentPage);
      }
    };
    if (currentPage === 1) {
      prevButton.classList.add("disabled");
      prevButton.disabled = true;
    }
    paginationContainer.appendChild(prevButton);

    // Page buttons
    for (let i = 1; i <= totalPages; i++) {
      const button = document.createElement("button");
      button.innerText = i;
      button.onclick = () => {
        currentPage = i;
        displayArticles(currentPage);
      };
      if (i === currentPage) {
        button.style.fontWeight = "bold";
        button.style.backgroundColor = "#0056b3";
      }
      paginationContainer.appendChild(button);
    }

    // Next button
    const nextButton = document.createElement("button");
    nextButton.innerText = "Next";
    nextButton.onclick = () => {
      if (currentPage < totalPages) {
        currentPage++;
        displayArticles(currentPage);
      }
    };
    if (currentPage === totalPages) {
      nextButton.classList.add("disabled");
      nextButton.disabled = true;
    }
    paginationContainer.appendChild(nextButton);
  }

  // Khi tải trang, hiển thị danh sách bài viết
  window.onload = () => {
    displayArticles(currentPage);
  };
</script>

<style>
  #articles {
    width: 60%;
  }

  .article {
    border: 1px solid #ddd;
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 5px;
    text-align: left;
    background-color: #1e1e1e;
  }

  .content session.list {
    display: flex;
    justify-content: center;
  }

  .pagination {
    display: flex;
    justify-content: center;
    margin-top: 20px;
  }
  .pagination button {
    margin: 0 5px;
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    background-color: #76ff03;
    color: black;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  .pagination button:hover {
    background-color: #64dd17;
  }
  .pagination button.disabled {
    background-color: #444;
    cursor: not-allowed;
  }
</style>
